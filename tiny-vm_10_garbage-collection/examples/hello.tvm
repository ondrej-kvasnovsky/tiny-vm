function fun1
set message 1
sync fun2

function fun2
set message 2
sync fun3

function fun3
set message 3
print_stack_trace

function main
async fun1
exit